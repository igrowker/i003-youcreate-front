<div class="fiscal-container">

  <div class="fiscal-header">
    <div class="fiscal-header-item" i18n>Tipo de impuesto</div>
    <div class="fiscal-header-item" i18n>Monto</div>
    <div class="fiscal-header-item" i18n>Vencimiento</div>
    <div class="fiscal-header-item" i18n>Notificación por email</div>
    <div class="fiscal-header-item" i18n>Estado del pago</div>
    <div class="fiscal-header-item" i18n>Pagar</div>
  </div>

  <div class="card">
    <div class="fiscal-body">
      <div class="fiscal-row" *ngFor="let obligation of obligations; let i = index">

        <div class="fiscal-item">{{ obligation.tipo_impuesto }}</div>
        <div class="fiscal-item">{{ obligation.monto_a_pagar | currency:'ARS'}}</div>
        <div class="fiscal-item">{{ obligation.fecha_vencimiento| date:'dd/MM/yyyy' }}</div>
        <div class="fiscal-item">

          <label class="switch">
            <input type="checkbox" [(ngModel)]="obligation.email_automatico" (change)="emailAutomatico(obligation)">
            <span class="slider"></span>
          </label>

        </div>
        <div class="fiscal-item">
          <span class="status-dot" [ngClass]="getStatusClass(obligation)"></span>
        </div>
        <div class="fiscal-item">
          @if (!obligation.estado_pago) {
            <button class="pay-btn" (click)="openDialog(obligation)" i18n>PAGAR</button>
          }@else {
            <span>Pago confirmado</span>
          }
          
        </div>

      </div>
      <div *ngIf="obligations.length === 0" class="no-obligations">
        <p i18n>No hay obligaciones fiscales disponibles.</p>
      </div>
    </div>

  </div>
</div>

<div class="fiscal-footer">
  <button class="footer-btn" i18n>Datos impositivos</button>
  <button class="footer-btn" i18n>Declaración de impuestos</button>
  <button class="footer-btn" i18n>Normativas</button>
</div>