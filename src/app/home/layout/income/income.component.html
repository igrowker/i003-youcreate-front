<div class="income-container">
  <div class="dashboard-top">

    <div class="price rectangle">
      <span class="currency">ARS</span>
      @if(totalIncome() !== 0) {
        <span class="price-number">${{ totalIncome() | numberWithDots }}</span>
      }@else {
        <p>Cargando...</p>
      }
    </div>

    <div class="graphic rectangle">
      <span class="graph-title">Ingresos Totales {{ getCurrentMonth() }}</span>
       <!-- <app-swap-graphics/> -->
    </div>

  </div>

  <div>
    <div class="buttons-filter">
      @if (isYearsOrMonthsDropdown()) {
        <btn-dropdown
          [options]="months"
          [label]="getCurrentMonth()"
          type="borderless"
          [disabled]="typeToFilter() === ''"
          (selectedValue)="getMonthToFilter($event)"
        />
      } @else {
        <btn-dropdown
          [options]="years"
          [label]="currentYear.toString()"
          type="borderless"
          (selectedValue)="getYearToFilter($event)"
          [disabled]="typeToFilter() === ''"
        />
      }

       <btn-dropdown
          [options]="filterType"
          type="filter"
          label="filtrar datos"
          (selectedValue)="getTypeToFilter($event)"
        />
    </div>

    @if (isYearsOrMonthsDropdown()) {

      <div class="table-container">
        @if (!isLoadingMonth && filterByMonth().length > 0) {
          <table class="payment-table">
              <thead class="header-titles">
                <tr>
                  <th>Nombre</th>
                  <th>Fecha</th>
                  <th>Monto</th>
                  <th class="th-center">Categoria</th>
                  <th class="th-center">Descripci贸n</th>
                </tr>
              </thead>
              <tbody class="body">
                @for (income of filterByMonth(); track income) {
                  <tr>
                    <td>{{ income.origen }}</td>
                    <td>{{ income.date | date:'MM/dd/yyyy' }}</td>
                    <td>
                      <span>{{ currency }} </span>
                      <span>{{ income.total | numberWithDots }} </span>
                    </td>
                    <td class="td-category">
                      <btn-dropdown
                        [options]="categoryOptions"
                        label="categoria"
                      />
                    </td>
                    <td class="td-description">
                      <button class="btn-base">Descripci贸n</button>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
            <paginator [dataList]="incomeList" [rowsPerPage]="rawsPerPage" (pageChange)="onPageChange($event)"/>
        }@else if( !isLoadingMonth && filterByMonth().length === 0 ) {
          <span class="empty-message">No hay informaci贸n disponible en este momento</span>
        }

        @if (isLoadingMonth) {
          <app-spinner class="spinner-month"/>
        }
      </div>
    } @else {
      <div class="graphicBar-container">
        @if (isLoadingYear) {
          <app-spinner class="spinner"/>
        }

        @if(!isLoadingYear) {

          @if(filterByYear().length > 0){
            <bar-graphic
              [labels]="months"
              title="Historial De Ingresos"
              [data]="filterByYear()"
              [barStyles]="barStyles"
            />
          }@else {
            <p class="spinner">No hay informaci贸n disponible</p>
          }

        }
      </div>
    }

  </div>

</div>



